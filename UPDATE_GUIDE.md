# 📋 데이터 업데이트 가이드

## 🎯 개요
조배치 변경, 참여자 추가, 하차자 처리 등의 변화가 있을 때 `data.json`을 업데이트하는 방법입니다.

---

## 📝 준비물
1. **CSV 파일**: 위치(Location), 팀(Team), 아이디(ID), 나이(Age) 컬럼이 있는 CSV 파일
2. **ID 컬럼 형식**: `이름+전화번호4자리` (예: `이민재6550`, `김정민7823`)

---

## 🚀 사용 방법

### 방법 1: 자동 업데이트 (추천)
가장 최신 CSV 파일을 자동으로 찾아서 업데이트합니다.

```bash
python update_data.py
```

### 방법 2: 파일 지정 업데이트
특정 CSV 파일을 지정해서 업데이트합니다.

```bash
python update_data.py "교리교육 출석부_251115.csv"
```

---

## 📊 실행 결과 예시

```
============================================================
📋 교리교육 조배치 데이터 업데이트 스크립트
============================================================
🔍 최신 CSV 파일 발견: 교리교육 출석부_251109 - 1109_admin_add age.csv
📂 읽는 중: 교리교육 출석부_251109 - 1109_admin_add age.csv

✅ 총 291명의 데이터가 data.json에 저장되었습니다!

📍 위치별:
   - 웨슬리홀: 138명
   - 칼빈채플: 141명
   - 자모영아실: 12명

📊 연령대별:
   - 50세 이상: 147명
   - 50세 미만: 144명

👥 조별 인원:
   - 새1: 8명
   - 새2: 8명
   - 새3: 8명
   ...

✨ 업데이트 완료!
```

---

## 🔧 CSV 파일 형식

CSV 파일은 다음과 같은 형식이어야 합니다:

```csv
Location,Team,ID,Age
웨슬리홀,새1,이민재6550,34
웨슬리홀,새1,김정민7823,28
칼빈채플,새4,김강민6324,40
자모영아실,여6,신은혜7567,43
```

### 필수 컬럼:
- **Location**: 위치 (웨슬리홀, 칼빈채플, 자모영아실)
- **Team**: 조 이름 (새1, 남2, 여3 등)
- **ID**: 이름+전화번호4자리 (예: 이민재6550)
- **Age**: 나이 (숫자)

### 주의사항:
- 빈 행은 자동으로 무시됩니다
- ID 컬럼에 "서브튜터", "튜터" 같은 추가 텍스트가 있어도 괜찮습니다
- 전화번호는 반드시 4자리여야 합니다

---

## 🗺️ 위치별 지도 이미지 설정

각 위치별로 자동으로 매핑되는 이미지:

- **웨슬리홀** → `images/1107_웨슬리_v2.jpg`
- **칼빈채플** → `images/1107_칼빈.jpg`
- **자모영아실** → `images/자모 영아실 안내.jpg`

새로운 위치를 추가하려면 `update_data.py` 파일의 `location_images` 딕셔너리를 수정하세요.

---

## ❓ 문제 해결

### CSV 파일을 찾을 수 없어요
```
❌ CSV 파일을 찾을 수 없습니다!
```
→ 프로젝트 폴더에 CSV 파일이 있는지 확인하거나, 파일명을 직접 지정하세요.

### 데이터 형식이 맞지 않아요
```
❌ 오류 발생: ...
```
→ CSV 파일이 위의 형식과 일치하는지 확인하세요. 특히:
- 컬럼명이 정확한지 (Location, Team, ID, Age)
- ID가 "이름+4자리숫자" 형식인지
- 인코딩이 UTF-8인지

---

## 💡 팁

### 1. 백업하기
중요한 업데이트 전에는 기존 `data.json`을 백업하세요:
```bash
copy data.json data_backup.json
```

### 2. 정기적으로 업데이트
- 매주 또는 조배치 변경 시마다 실행
- CSV 파일은 최신 버전으로 유지

### 3. 데이터 검증
- 업데이트 후 출력되는 통계로 인원수 확인
- `index.html`을 열어서 검색 기능이 잘 작동하는지 테스트

---

## 📞 문의
업데이트 중 문제가 발생하면 개발자에게 문의하세요.

