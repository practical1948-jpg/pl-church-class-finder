# PL교회 교리교육 조 배치 검색기

## 📋 프로젝트 소개
교회 교리교육 성도들이 자신의 조 배치 정보를 쉽게 찾을 수 있도록 만든 웹 검색 시스템입니다.

## ✨ 주요 기능

### 일반 사용자 모드
- 이름 + 전화번호 뒷 4자리로 조 검색
- 조, 위치 정보 표시
- 조별 배치도 이미지 표시 및 확대 보기
- 다크/라이트 테마 전환
- 60세 이상 자동 큰 글씨 모드
- 모바일 최적화된 반응형 디자인

### 관리자 모드 (신규)
- **검색 모드**: 이름만으로 검색 가능 (동명이인 처리)
- **조별 보기**: 모든 조를 카드 형식으로 표시 및 조원 목록 확인
- **개인별 보기**: 전체 조원 명단을 카드 형식으로 표시
- 실시간 검색/필터링 기능
- 관리자 계정 로그인 (plc / plc0110)

## 🚀 사용 방법

### 일반 사용자
1. 웹사이트 접속
2. 이름과 전화번호 뒷 4자리 입력
3. "조 확인하기" 버튼 클릭
4. 조, 위치, 배치도 확인

### 관리자
1. 우측 상단 관리자 아이콘 클릭
2. 아이디: `plc`, 비밀번호: `plc0110` 입력
3. 3가지 모드 중 선택하여 사용:
   - **검색 모드**: 이름으로 빠른 검색
   - **조별 보기**: 조 단위 관리
   - **개인별 보기**: 전체 명단 확인

### 로컬 서버 실행 (개발용)
```bash
python -m http.server 8000
```
그 후 브라우저에서 `http://localhost:8000` 접속

## 📝 데이터 업데이트 방법

조배치 변경, 참여자 추가, 하차자 처리 등의 변화가 있을 때 다음과 같이 업데이트합니다.

### 1. CSV 파일 준비
- Google Sheets에서 CSV 다운로드: 파일 → 다운로드 → 쉼표로 구분된 값(.csv)
- CSV 파일을 프로젝트 폴더에 저장

### 2. CSV 구조

**방법 A: 헤더 있는 형식**
```csv
Location,Team,ID,Age
웨슬리홀,새1,이민재6550,34
웨슬리홀,새1,김정민7823,28
칼빈채플,새4,김강민6324,40
자모영아실,여6,신은혜7567,43
```

**방법 B: 헤더 없는 형식 (4주차 이후)**
```csv
웨슬리홀,청1,송유미2205,34
웨슬리홀,청1,곽빛보라2672,38
칼빈채플,남4,전자룡7684,42
자모영아실,여6,신은혜7567,43
```

**필수 컬럼:**
- `Location` 또는 1번째 컬럼: 위치 (웨슬리홀, 칼빈채플, 자모영아실)
- `Team` 또는 2번째 컬럼: 조 이름 (새1, 남2, 여3, 청1 등)
- `ID` 또는 3번째 컬럼: "이름+전화번호4자리" 형식 (예: 이민재6550, 송유미2205)
- `Age` 또는 4번째 컬럼: 나이 (숫자, 비어있으면 0으로 처리)

### 3. 자동 업데이트

**방법 A: 헤더 있는 CSV 파일 (기존 방식)**
```bash
python update_data.py
```
또는 특정 파일 지정:
```bash
python update_data.py "교리교육 출석부_251115.csv"
```

**방법 B: 헤더 없는 CSV 파일 (4주차 이후)**
```bash
python convert_csv_4week.py
```
스크립트가 `출석부작업_251122 - admin_4주차.csv` 파일을 읽어서 `data.json`을 업데이트합니다.

**다른 파일명 사용 시:**
`convert_csv_4week.py` 파일에서 파일명을 수정하거나, 스크립트를 복사하여 파일명을 변경하세요.

실행하면 `data.json` 파일이 자동으로 업데이트되고, 통계가 출력됩니다.

### 4. 업데이트 검수

업데이트가 정상적으로 완료되었는지 확인:

```bash
python check_update.py
```

이 스크립트는 다음을 자동으로 확인합니다:
- ✅ CSV와 JSON의 총 인원 수 비교
- ✅ 위치별 인원 수 비교 (웨슬리홀, 칼빈채플, 자모영아실)
- ✅ 조별 인원 수 비교
- ✅ 나이 통계 비교 (60세 이상, 50-59세, 50세 미만, 나이 미입력)
- ✅ 데이터 매칭 확인 (CSV에만 있거나 JSON에만 있는 항목)

차이가 발견되면 상세한 내용이 출력됩니다.

📖 **자세한 설명**: `UPDATE_GUIDE.md` 파일을 참고하세요.

## 🖼️ 배치도 이미지 추가 방법

### 1. 이미지 파일 준비
- `images` 폴더에 조별 배치도 이미지 저장
- 파일명 예시: `남1.jpg`, `여5.png` 등

### 2. data.json에 이미지 경로 추가
```json
{
  "location": "칼빈채플",
  "team": "방송팀",
  "name": "테스트",
  "phone": "1111",
  "mapImage": "images/남1.jpg"
}
```

## 📱 QR 코드 생성

웹사이트 배포 후 다음 사이트에서 QR 코드 생성:
- https://www.qr-code-generator.com/
- https://www.the-qrcode-generator.com/

## 🌐 배포 방법 (GitHub Pages)

### 1. GitHub 저장소 생성
1. GitHub에 새 repository 생성
2. 파일 업로드 (index.html, style.css, script.js, data.json)

### 2. GitHub Pages 활성화
1. Settings → Pages
2. Source: Deploy from a branch
3. Branch: main → /(root) → Save

### 3. 접속 URL
- 일반 사용자: `https://<사용자명>.github.io/<저장소명>/`
- 관리자: `https://<사용자명>.github.io/<저장소명>/admin.html`

## 📁 파일 구조
```
교리교육 조배치 검색기/
├── index.html          # 메인 페이지 (일반 사용자)
├── admin.html          # 관리자 페이지
├── roadmap.html        # 로드맵 페이지
├── style.css           # 공통 스타일시트
├── admin.css           # 관리자 전용 스타일
├── script.js           # 메인 페이지 로직
├── admin.js            # 관리자 페이지 로직
├── data.json           # 성도 데이터 (291명)
├── images/             # 배치도 이미지
│   ├── 1107_웨슬리_v2.jpg
│   ├── 1107_칼빈.jpg
│   └── 자모 영아실 안내.jpg
├── update_data.py      # ⭐ 데이터 업데이트 스크립트 (헤더 있는 CSV)
├── convert_csv_4week.py # 데이터 업데이트 스크립트 (헤더 없는 CSV)
├── check_update.py     # 업데이트 검수 스크립트
├── convert_*.py        # 기타 데이터 변환 스크립트들
├── README.md           # 이 파일
└── UPDATE_GUIDE.md     # 데이터 업데이트 상세 가이드
```

## 🎨 디자인
- **컬러 테마**
  - 배경: 밀크베이지 (#F5F1E8)
  - 메인: 미드나이트 블루 (#1B3B6F)
  - 로고: PLC
- **다크 모드 지원**
- **반응형 디자인** (모바일, 태블릿, 데스크톱)

## 📊 현재 데이터
- 총 성도 수: 291명
- 조 구성: 새1~새7, 남1~남9, 여1~여7, 청1~청7, DG1~DG5, M1~M5, W1~W5
- 위치: 웨슬리홀, 칼빈채플, 자모영아실

## ⚠️ 주의사항
- 전화번호는 뒷 4자리만 사용 (개인정보 보호)
- 관리자 계정 정보는 관리자에게만 공유
- 데이터 업데이트 시 `data.json` 파일만 교체하면 됩니다
- 브라우저에서 직접 파일을 열 때 CORS 에러가 발생할 수 있습니다 (로컬 서버 사용 권장)
- 관리자 로그인은 세션 스토리지를 사용하여 보안 유지

## 📞 문의
문제가 발생하면 교회 담당자에게 연락주세요.

---
**PL교회 12주 교리교육**

